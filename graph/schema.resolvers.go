package graph

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen version v0.17.81

import (
	"bureau/graph/model"
	"context"
	"fmt"
	"time"
)

// UserLogin is the resolver for the userLogin field.
func (r *mutationResolver) UserLogin(ctx context.Context, input model.LoginInput) (*model.AuthPayload, error) {
	panic(fmt.Errorf("not implemented: UserLogin - userLogin"))
}

// ClientLogin is the resolver for the clientLogin field.
func (r *mutationResolver) ClientLogin(ctx context.Context, input model.ClientLoginInput) (*model.AuthPayload, error) {
	panic(fmt.Errorf("not implemented: ClientLogin - clientLogin"))
}

// RefreshToken is the resolver for the refreshToken field.
func (r *mutationResolver) RefreshToken(ctx context.Context, input model.RefreshTokenInput) (*model.AuthPayload, error) {
	panic(fmt.Errorf("not implemented: RefreshToken - refreshToken"))
}

// ProductCreate is the resolver for the productCreate field.
func (r *mutationResolver) ProductCreate(ctx context.Context, input model.ProductInput) (*model.Product, error) {
	panic(fmt.Errorf("not implemented: ProductCreate - productCreate"))
}

// ProductUpdate is the resolver for the productUpdate field.
func (r *mutationResolver) ProductUpdate(ctx context.Context, id string, input model.ProductInput) (*model.Product, error) {
	panic(fmt.Errorf("not implemented: ProductUpdate - productUpdate"))
}

// ProductDelete is the resolver for the productDelete field.
func (r *mutationResolver) ProductDelete(ctx context.Context, id string) (bool, error) {
	panic(fmt.Errorf("not implemented: ProductDelete - productDelete"))
}

// ClientCreate is the resolver for the clientCreate field.
func (r *mutationResolver) ClientCreate(ctx context.Context, input model.ClientInput) (*model.Client, error) {
	panic(fmt.Errorf("not implemented: ClientCreate - clientCreate"))
}

// ClientUpdate is the resolver for the clientUpdate field.
func (r *mutationResolver) ClientUpdate(ctx context.Context, id string, input model.ClientInput) (*model.Client, error) {
	panic(fmt.Errorf("not implemented: ClientUpdate - clientUpdate"))
}

// ClientDelete is the resolver for the clientDelete field.
func (r *mutationResolver) ClientDelete(ctx context.Context, id string) (bool, error) {
	panic(fmt.Errorf("not implemented: ClientDelete - clientDelete"))
}

// SaleCreate is the resolver for the saleCreate field.
func (r *mutationResolver) SaleCreate(ctx context.Context, input model.SaleInput) (*model.Sale, error) {
	panic(fmt.Errorf("not implemented: SaleCreate - saleCreate"))
}

// SaleUpdate is the resolver for the saleUpdate field.
func (r *mutationResolver) SaleUpdate(ctx context.Context, id string, input model.SaleInput) (*model.Sale, error) {
	panic(fmt.Errorf("not implemented: SaleUpdate - saleUpdate"))
}

// SaleDelete is the resolver for the saleDelete field.
func (r *mutationResolver) SaleDelete(ctx context.Context, id string) (bool, error) {
	panic(fmt.Errorf("not implemented: SaleDelete - saleDelete"))
}

// PaymentCreate is the resolver for the paymentCreate field.
func (r *mutationResolver) PaymentCreate(ctx context.Context, input model.PaymentInput) (*model.Payment, error) {
	panic(fmt.Errorf("not implemented: PaymentCreate - paymentCreate"))
}

// PaymentUpdate is the resolver for the paymentUpdate field.
func (r *mutationResolver) PaymentUpdate(ctx context.Context, id string, input model.PaymentInput) (*model.Payment, error) {
	panic(fmt.Errorf("not implemented: PaymentUpdate - paymentUpdate"))
}

// PaymentDelete is the resolver for the paymentDelete field.
func (r *mutationResolver) PaymentDelete(ctx context.Context, id string) (bool, error) {
	panic(fmt.Errorf("not implemented: PaymentDelete - paymentDelete"))
}

// CommissionManualCreate is the resolver for the commissionManualCreate field.
func (r *mutationResolver) CommissionManualCreate(ctx context.Context, input model.CommissionInput) (*model.Commission, error) {
	panic(fmt.Errorf("not implemented: CommissionManualCreate - commissionManualCreate"))
}

// RunBinaryCommissionCheck is the resolver for the runBinaryCommissionCheck field.
func (r *mutationResolver) RunBinaryCommissionCheck(ctx context.Context, clientID string) (*model.CommissionResult, error) {
	panic(fmt.Errorf("not implemented: RunBinaryCommissionCheck - runBinaryCommissionCheck"))
}

// Me is the resolver for the me field.
func (r *queryResolver) Me(ctx context.Context) (*model.User, error) {
	panic(fmt.Errorf("not implemented: Me - me"))
}

// Products is the resolver for the products field.
func (r *queryResolver) Products(ctx context.Context, filter *model.FilterInput, paging *model.PagingInput) ([]*model.Product, error) {
	panic(fmt.Errorf("not implemented: Products - products"))
}

// Product is the resolver for the product field.
func (r *queryResolver) Product(ctx context.Context, id string) (*model.Product, error) {
	panic(fmt.Errorf("not implemented: Product - product"))
}

// Clients is the resolver for the clients field.
func (r *queryResolver) Clients(ctx context.Context, filter *model.FilterInput, paging *model.PagingInput) ([]*model.Client, error) {
	// Minimal implementation: ignore filter/paging wiring for now
	clients, err := r.Resolver.clientService.GetAll(ctx, nil, nil)
	if err != nil {
		return nil, err
	}

	out := make([]*model.Client, 0, len(clients))
	for _, c := range clients {
		mc := &model.Client{
			ID:                 c.ID.Hex(),
			ClientID:           c.ClientID,
			Name:               c.Name,
			JoinDate:           c.JoinDate.Format(time.RFC3339),
			SponsorID:          nil,
			Position:           c.Position,
			LeftChildID:        nil,
			RightChildID:       nil,
			TotalEarnings:      c.TotalEarnings,
			WalletBalance:      c.WalletBalance,
			NetworkVolumeLeft:  c.NetworkVolumeLeft,
			NetworkVolumeRight: c.NetworkVolumeRight,
			BinaryPairs:        int32(c.BinaryPairs),
		}
		if c.SponsorID != nil {
			sid := c.SponsorID.Hex()
			mc.SponsorID = &sid
			// hydrate sponsor
			sponsor, err := r.Resolver.clientService.GetByID(ctx, sid)
			if err == nil && sponsor != nil {
				mc.Sponsor = &model.Client{
					ID:          sponsor.ID.Hex(),
					ClientID:    sponsor.ClientID,
					Name:        sponsor.Name,
					JoinDate:    sponsor.JoinDate.Format(time.RFC3339),
					Position:    sponsor.Position,
					BinaryPairs: int32(sponsor.BinaryPairs),
				}
			}
		}
		if c.LeftChildID != nil {
			lid := c.LeftChildID.Hex()
			mc.LeftChildID = &lid
		}
		if c.RightChildID != nil {
			rid := c.RightChildID.Hex()
			mc.RightChildID = &rid
		}
		out = append(out, mc)
	}
	return out, nil
}

// Client is the resolver for the client field.
func (r *queryResolver) Client(ctx context.Context, id string) (*model.Client, error) {
	c, err := r.Resolver.clientService.GetByID(ctx, id)
	if err != nil {
		return nil, err
	}
	mc := &model.Client{
		ID:                 c.ID.Hex(),
		ClientID:           c.ClientID,
		Name:               c.Name,
		JoinDate:           c.JoinDate.Format(time.RFC3339),
		Position:           c.Position,
		TotalEarnings:      c.TotalEarnings,
		WalletBalance:      c.WalletBalance,
		NetworkVolumeLeft:  c.NetworkVolumeLeft,
		NetworkVolumeRight: c.NetworkVolumeRight,
		BinaryPairs:        int32(c.BinaryPairs),
	}
	if c.SponsorID != nil {
		sid := c.SponsorID.Hex()
		mc.SponsorID = &sid
		sponsor, err := r.Resolver.clientService.GetByID(ctx, sid)
		if err == nil && sponsor != nil {
			mc.Sponsor = &model.Client{
				ID:          sponsor.ID.Hex(),
				ClientID:    sponsor.ClientID,
				Name:        sponsor.Name,
				JoinDate:    sponsor.JoinDate.Format(time.RFC3339),
				Position:    sponsor.Position,
				BinaryPairs: int32(sponsor.BinaryPairs),
			}
		}
	}
	if c.LeftChildID != nil {
		lid := c.LeftChildID.Hex()
		mc.LeftChildID = &lid
	}
	if c.RightChildID != nil {
		rid := c.RightChildID.Hex()
		mc.RightChildID = &rid
	}
	return mc, nil
}

// Sales is the resolver for the sales field.
func (r *queryResolver) Sales(ctx context.Context, filter *model.FilterInput, paging *model.PagingInput) ([]*model.Sale, error) {
	panic(fmt.Errorf("not implemented: Sales - sales"))
}

// Sale is the resolver for the sale field.
func (r *queryResolver) Sale(ctx context.Context, id string) (*model.Sale, error) {
	panic(fmt.Errorf("not implemented: Sale - sale"))
}

// Payments is the resolver for the payments field.
func (r *queryResolver) Payments(ctx context.Context, filter *model.FilterInput, paging *model.PagingInput) ([]*model.Payment, error) {
	panic(fmt.Errorf("not implemented: Payments - payments"))
}

// Payment is the resolver for the payment field.
func (r *queryResolver) Payment(ctx context.Context, id string) (*model.Payment, error) {
	panic(fmt.Errorf("not implemented: Payment - payment"))
}

// Commissions is the resolver for the commissions field.
func (r *queryResolver) Commissions(ctx context.Context, filter *model.FilterInput, paging *model.PagingInput) ([]*model.Commission, error) {
	panic(fmt.Errorf("not implemented: Commissions - commissions"))
}

// Commission is the resolver for the commission field.
func (r *queryResolver) Commission(ctx context.Context, id string) (*model.Commission, error) {
	panic(fmt.Errorf("not implemented: Commission - commission"))
}

// DashboardStats is the resolver for the dashboardStats field.
func (r *queryResolver) DashboardStats(ctx context.Context, rangeArg *string) (*model.DashboardStats, error) {
	panic(fmt.Errorf("not implemented: DashboardStats - dashboardStats"))
}

// DashboardData is the resolver for the dashboardData field.
func (r *queryResolver) DashboardData(ctx context.Context) (*model.DashboardStats, error) {
	panic(fmt.Errorf("not implemented: DashboardData - dashboardData"))
}

// OnNewSale is the resolver for the onNewSale field.
func (r *subscriptionResolver) OnNewSale(ctx context.Context) (<-chan *model.Sale, error) {
	panic(fmt.Errorf("not implemented: OnNewSale - onNewSale"))
}

// OnNewCommission is the resolver for the onNewCommission field.
func (r *subscriptionResolver) OnNewCommission(ctx context.Context) (<-chan *model.Commission, error) {
	panic(fmt.Errorf("not implemented: OnNewCommission - onNewCommission"))
}

// Mutation returns MutationResolver implementation.
func (r *Resolver) Mutation() MutationResolver { return &mutationResolver{r} }

// Query returns QueryResolver implementation.
func (r *Resolver) Query() QueryResolver { return &queryResolver{r} }

// Subscription returns SubscriptionResolver implementation.
func (r *Resolver) Subscription() SubscriptionResolver { return &subscriptionResolver{r} }

type mutationResolver struct{ *Resolver }
type queryResolver struct{ *Resolver }
type subscriptionResolver struct{ *Resolver }
